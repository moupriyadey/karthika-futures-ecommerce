{% extends '_base.html' %}

{% block title %}Karthika Futures - Your Gateway to Divine Art{% endblock %}

{% block content %}
<main class="pt-20">
 <section class="fade-section relative min-h-[100vh] sm:min-h-[90vh] flex items-center justify-center text-white overflow-hidden px-4">

    <!-- Background Video -->
    <video id="heroVideo" autoplay muted loop playsinline
    poster="{{ url_for('static', filename='images/video_placeholder.jpg') }}"
    class="absolute inset-0 w-full h-full object-cover z-0">
    <source src="{{ url_for('static', filename='videos/hero1.mp4') }}" type="video/mp4">
    Your browser does not support the video tag.
</video>


    <!-- Overlay for Readability -->
    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black opacity-75 z-10"></div>

    <!-- Floating Video Controls -->
    <div id="videoControls" class="video-controls bg-black bg-opacity-40 px-2 py-1 rounded-full opacity-0 transition-opacity duration-300">
        <button id="backBtn" class="video-btn" title="Back 10s">‚è™</button>
        <button id="playBtn" class="video-btn hidden" title="Play">‚ñ∂</button>
        <button id="pauseBtn" class="video-btn" title="Pause">‚è∏</button>
        <button id="muteBtn" class="video-btn" title="Mute">üîá</button>
        <button id="unmuteBtn" class="video-btn hidden" title="Unmute">üîä</button>
        <button id="fullscreenBtn" class="video-btn" title="Fullscreen">‚õ∂</button>
        <button id="forwardBtn" class="video-btn" title="Forward 10s">‚è©</button>
    </div>

    <!-- Text Content -->
    <div class="relative z-30 text-center p-4 max-w-4xl mx-auto flex flex-col items-center justify-center">
        <h1 class="fade-item text-3xl sm:text-5xl md:text-7xl font-extrabold mb-4 leading-tight text-shadow-lg">
            Art Meets Divinity
        </h1>
        <p class="fade-item text-base sm:text-lg md:text-2xl mb-6 font-light text-shadow-md">
            The battlefield of Kurukshetra was too fierce. No one could narrate the horrible time...
            Embark on a spiritual journey through timeless artworks inspired by the Mahabharata and Hindu mythology.
        </p>
        <div class="fade-item go-button-wrapper">
            <a href="/all-products" class="btn btn-primary text-base sm:text-xl px-6 sm:px-8 py-3 sm:py-4 rounded-full go-button-inner hover:scale-105 transition-transform duration-300">
                Go
            </a>
        </div>
    </div>

</section>

    <section class="fade-section py-16 bg-white">
        <div class="container mx-auto">
            <h2 class="fade-item text-4xl font-extrabold text-center text-gray-800 mb-10">Featured Divine Masterpieces</h2>
            
            <div id="featuredArtworksBootstrapCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
                <div class="carousel-inner">
                    {% for artwork in featured_artworks %}
                    <div class="carousel-item {% if loop.first %}active{% endif %}">
                        <div class="flex justify-center">
                            <div class="fade-item product-card bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-xl w-80 mx-auto">
                                <a href="{{ url_for('product_detail', sku=artwork.sku) }}">
                                    <div class="thumbnail-wrapper rounded-lg shadow-sm group">
                                        <img
                                            src="{{ artwork.get_images_list()[0] if artwork.get_images_list() else url_for('static', filename='images/placeholder.png') }}"
                                            alt="{{ artwork.name }}"
                                            class="d-block w-full object-contain transition-transform duration-300 group-hover:scale-105 cursor-pointer"
                                            title="Click to view larger"
                                            onclick="event.preventDefault(); openFullImage('{{ artwork.get_images_list()[0] if artwork.get_images_list() else url_for('static', filename='images/placeholder.png') }}'); event.stopPropagation();"
                                            loading="lazy">
                                    </div>
                                </a>
                                <div class="p-4">
                                    <h3 class="text-xl font-semibold text-gray-900 mb-2 truncate">{{ artwork.name }}</h3>
                                    <p class="text-gray-600 text-sm mb-3">{{ artwork.description[:100] }}{% if artwork.description|length > 100 %}...{% endif %}</p>
                                    <div class="flex items-baseline justify-between mb-4">
                                        <span class="text-2xl font-bold text-primary final-price">{{ artwork.selling_price_incl_gst | currency }}</span>
                                    </div>
                                    <div class="flex items-center mb-3">
                                        <div class="text-yellow-500">
                                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                                        </div>
                                        <span class="text-sm text-gray-600 ml-2">(4.5/5)</span>
                                    </div>
                                    {% if artwork.shipping_charge is defined and artwork.shipping_charge == 0 %}
                                    <p class="text-green-600 font-semibold text-sm mb-3"><i class="fas fa-truck mr-1"></i> Free Delivery</p>
                                    {% else %}
                                    <p class="text-gray-500 text-sm mb-3"><i class="fas fa-truck mr-1"></i> Shipping charges apply</p>
                                    {% endif %}
                                    <div class="flex justify-center">
                                        <a href="{{ url_for('product_detail', sku=artwork.sku) }}" class="btn btn-primary px-6 py-2">View Details</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="carousel-item active">
                        <p class="text-center text-gray-600 w-full py-10">No featured artworks available at the moment.</p>
                    </div>
                    {% endfor %}
                </div>

                <button class="carousel-control-prev" type="button" data-bs-target="#featuredArtworksBootstrapCarousel" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#featuredArtworksBootstrapCarousel" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
    </section>

    <section class="fade-section py-16 bg-primary text-white text-center">
        <div class="container mx-auto">
            <h2 class="fade-item text-4xl font-extrabold mb-6">Discover Your Spiritual Connection</h2>
            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8">
                Each artwork at Karthika Futures is a gateway to ancient wisdom and inner peace. Find the piece that resonates with your soul.
            </p>
            <a href="{{ url_for('all_products') }}" class="fade-item btn bg-white text-primary text-xl px-8 py-4 rounded-full shadow-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-300">
                Begin Your Journey <i class="fas fa-leaf ml-2"></i>
            </a>
        </div>
    </section>
    
    <!-- Sacred Appeal Section -->
    <section class="fade-section py-16 relative text-gray-900 text-center"
         style="background: url('{{ url_for('static', filename='images/bg.jpg') }}') center/cover no-repeat;">

      <div class="absolute inset-0 bg-yellow-50 bg-opacity-80"></div>
      <div class="relative container mx-auto max-w-4xl">
        <h2 class="fade-item text-3xl sm:text-4xl font-extrabold mb-6 text-primary">üïâÔ∏è ‡§Ø‡§¶‡§æ ‡§Ø‡§¶‡§æ ‡§π‡§ø ‡§ß‡§∞‡•ç‡§Æ‡§∏‡•ç‡§Ø...</h2>
        
        <p class="fade-item text-lg sm:text-xl font-semibold mb-4">
          <span class="text-orange-300">"‡§Ø‡§¶‡§æ ‡§Ø‡§¶‡§æ ‡§π‡§ø ‡§ß‡§∞‡•ç‡§Æ‡§∏‡•ç‡§Ø ‡§ó‡•ç‡§≤‡§æ‡§®‡§ø‡§∞‡•ç‡§≠‡§µ‡§§‡§ø ‡§≠‡§æ‡§∞‡§§‡•§<br>
          ‡§Ö‡§≠‡•ç‡§Ø‡•Å‡§§‡•ç‡§•‡§æ‡§®‡§Æ‡§ß‡§∞‡•ç‡§Æ‡§∏‡•ç‡§Ø ‡§§‡§¶‡§æ‡§Ω‡§Ö‡§§‡•ç‡§Æ‡§æ‡§®‡§Ç ‡§∏‡•É‡§ú‡§æ‡§Æ‡•ç‡§Ø‡§π‡§Æ‡•ç‡••"</span><br>
          <em>(‡§≠‡§ó‡§µ‡§¶‡•ç‡§ó‡•Ä‡§§‡§æ ‡•™.‡•≠)</em>
        </p>
        
        <p class="fade-item text-lg sm:text-xl font-semibold mb-6">
          "Whenever righteousness declines and unrighteousness rises, O Arjuna, I manifest Myself."
        </p>
        
        <p class="fade-item text-lg sm:text-xl mb-8 text-gray-700">
          "‡§ú‡§¨-‡§ú‡§¨ ‡§ß‡§∞‡•ç‡§Æ ‡§ï‡•Ä ‡§π‡§æ‡§®‡§ø ‡§π‡•ã‡§§‡•Ä ‡§π‡•à ‡§î‡§∞ ‡§Ö‡§ß‡§∞‡•ç‡§Æ ‡§¨‡§¢‡§º‡§§‡§æ ‡§π‡•à, ‡§§‡§¨-‡§§‡§¨ ‡§Æ‡•à‡§Ç ‡§∏‡•ç‡§µ‡§Ø‡§Ç ‡§ï‡•ã ‡§Ö‡§µ‡§§‡§∞‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•Ç‡§Å‡•§"
        </p>
        
        <div class="fade-item bg-white shadow-lg rounded-xl p-6 sm:p-8 border-4 border-yellow-200 relative overflow-hidden"
        style="min-height: 1000px;">

          <!-- Temple Background inside container -->
          <div class="absolute inset-0 temple-bg"></div>

          <div class="relative z-10">
            <p class="text-lg sm:text-xl leading-relaxed mb-6">
              üõï Lord Padmanabha (Sri Hari) has incarnated countless times to restore Dharma.  
              When Lord Rama descended, noble souls took birth as Vanaras to aid Him.  
              When Lord Krishna appeared, the Devas took birth as Yadavas.  
              In this Kaliyuga, where adharma spreads as drugs, hatred, and moral decay,  
              Sri Kalki will come to destroy evil and protect the righteous ... and we have to be with his side.  
            </p>
            <p class="text-lg sm:text-xl leading-relaxed mb-4">
              üå∏ Our duty is clear ‚Äî uphold <strong>Sanatana Dharma</strong>, protect women and children,  
              respect elders, build a fearless and strong youth like Swami Vivekananda who said,  
              <em>"A good soul will stay inside a strong body."</em> ü™î
            </p>
            <p class="text-lg sm:text-xl leading-relaxed mb-6">
              üö© Let us unite against adharma, reject intoxicants, embrace purity, and walk the path of Dharma.  
              Every donation and purchase here is a step towards the Lord's side in His divine mission.
            </p>
            <div class="mt-6">
              <a href="/all-products" class="fade-item btn btn-primary text-lg sm:text-xl px-8 py-4 rounded-full shadow-lg hover:scale-105 transition-all duration-300">
                üôè Support &amp; Join the Mission
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- End Sacred Appeal Section -->

    <section class="fade-section py-16 bg-gradient-to-br from-orange-50 to-yellow-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="fade-item text-4xl font-extrabold mb-6 text-primary">Support Dharma Prachar</h2>
            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Every purchase from Karthika Futures contributes to the propagation of Dharma and ancient spiritual wisdom. Your support helps us spread the teachings of the Mahabharata and other sacred texts globally.
            </p>
            <a href="{{ url_for('contact') }}" class="fade-item btn btn-success text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                More about Dharma Prachar <i class="fas fa-heart ml-2"></i>
            </a>
        </div>
    </section>

    <section class="fade-section py-16 bg-gradient-to-br from-orange-50 to-yellow-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="fade-item text-4xl font-extrabold mb-6 text-primary">Support Our Divine Mission</h2>
            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Your generous contributions help us propagate Dharma and preserve ancient spiritual wisdom through art. Every donation makes a difference.
            </p>
            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Every purchase from Karthika Futures contributes to the propagation of Dharma and ancient spiritual wisdom. Your support helps us spread the teachings of the Mahabharata and other sacred texts globally.
            </p>
            <div class="fade-item inline-block p-4 bg-white rounded-xl shadow-2xl border-4 border-white transition-transform duration-300 hover:rotate-0">
                <img src="{{ url_for('static', filename='uploads/qr_code.png') }}" alt="Donation QR Code"
                             class="w-48 h-48 object-contain rounded-lg border-8 border-gray-100 shadow-inner-lg embossed-qr-shadow">
            </div>
            <p class="fade-item text-2xl font-bold text-gray-800 mt-6 mb-4">Scan to Donate via UPI</p>
            <div class="fade-item flex justify-center space-x-6 mb-8">
                <img src="{{ url_for('static', filename='images/upi_logos/bhim.png') }}" alt="BHIM UPI" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/gpay.png') }}" alt="Google Pay" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/phonepe.png') }}" alt="PhonePe" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/paytm.png') }}" alt="Paytm" class="h-10 w-auto">
            </div>
            <a href="{{ url_for('contact') }}" class="fade-item btn btn-primary text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                Contact for Other Donation Methods <i class="fas fa-hand-holding-heart ml-2"></i>
            </a>
        </div>
    </section>

    <section class="fade-section py-16 bg-gradient-to-br from-yellow-50 to-orange-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="fade-item text-4xl font-extrabold mb-10 text-primary">Voices of Devotion</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for testimonial in testimonials %}
                <div class="fade-item bg-white p-6 rounded-lg shadow-lg flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-[1.02] hover:shadow-xl">
                    <img src="{{ url_for('static', filename=testimonial.image) }}" alt="{{ testimonial.name }}" class="w-24 h-24 rounded-full object-cover mb-4 border-4 border-primary shadow-md">
                    <p class="text-lg font-medium mb-3">"{{ testimonial.feedback }}"</p>
                    <div class="text-yellow-500 mb-2">
                        {% for i in range(testimonial.rating) %}<i class="fas fa-star"></i>{% endfor %}
                        {% if testimonial.rating % 1 != 0 %}<i class="fas fa-star-half-alt"></i>{% endif %}
                    </div>
                    <p class="font-semibold text-gray-700">- {{ testimonial.name }}</p>
                    {% if testimonial.product_sku %}
                    <a href="{{ url_for('product_detail', sku=testimonial.product_sku) }}" class="text-sm text-blue-600 hover:underline mt-2">View Artwork</a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
</main>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    const fadeSections = document.querySelectorAll(".fade-section");

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const fadeItems = entry.target.querySelectorAll(".fade-item");
                fadeItems.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add("fade-visible");
                    }, index * 150); // stagger delay
                });
                // observer.unobserve(entry.target); // keep commented for repeats
            } else {
                // Reset when out of view
                const fadeItems = entry.target.querySelectorAll(".fade-item");
                fadeItems.forEach((item) => {
                    item.classList.remove("fade-visible");
                });
            }
        });
    }, { threshold: 0.15 });

    fadeSections.forEach((section) => {
        observer.observe(section);
    });
});


document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById("heroVideo");
    const controls = document.getElementById("videoControls");

    const playBtn = document.getElementById("playBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const muteBtn = document.getElementById("muteBtn");
    const unmuteBtn = document.getElementById("unmuteBtn");
    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const forwardBtn = document.getElementById("forwardBtn");
    const backBtn = document.getElementById("backBtn");

    let controlsTimeout;

    function showControls() {
        controls.classList.add("opacity-100");
        controls.classList.remove("opacity-0");
        clearTimeout(controlsTimeout);
        controlsTimeout = setTimeout(() => {
            controls.classList.add("opacity-0");
            controls.classList.remove("opacity-100");
        }, 3000);
    }

    document.addEventListener("mousemove", showControls);
    document.addEventListener("touchstart", showControls);

    // Play / Pause
    pauseBtn.addEventListener("click", () => {
        video.pause();
        pauseBtn.classList.add("hidden");
        playBtn.classList.remove("hidden");
    });
    playBtn.addEventListener("click", () => {
        video.play();
        playBtn.classList.add("hidden");
        pauseBtn.classList.remove("hidden");
    });

    // Mute / Unmute
    muteBtn.addEventListener("click", () => {
        video.muted = true;
        muteBtn.classList.add("hidden");
        unmuteBtn.classList.remove("hidden");
    });
    unmuteBtn.addEventListener("click", () => {
        video.muted = false;
        unmuteBtn.classList.add("hidden");
        muteBtn.classList.remove("hidden");
    });

    // Fullscreen
    fullscreenBtn.addEventListener("click", () => {
        if (video.requestFullscreen) {
            video.requestFullscreen();
        } else if (video.webkitRequestFullscreen) {
            video.webkitRequestFullscreen();
        } else if (video.msRequestFullscreen) {
            video.msRequestFullscreen();
        }
    });

    // Forward / Backward
    forwardBtn.addEventListener("click", () => {
        video.currentTime += 10;
    });
    backBtn.addEventListener("click", () => {
        video.currentTime -= 10;
    });

    // Initially show controls
    showControls();
});

</script>


<style>
.video-controls {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    gap: 6px;
    z-index: 40;
}

.video-controls button {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: none;
    padding: 6px; /* smaller than 10px */
    font-size: 0.9rem;
    border-radius: 50%;
    transition: background 0.3s ease, transform 0.2s ease;
    cursor: pointer;
}

.video-controls button:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.video-controls button:focus {
    outline: none;
}


 /* Make sure the container clips its background */
.bg-within {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 1rem; /* match your rounded-xl */
    overflow: hidden; /* ensures no overflow outside the rounded corners */
}


.fade-section {
    opacity: 1; /* Keep section visible for layout */
}

.fade-item {
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.9s ease, transform 0.9s ease;
}

.fade-item.fade-visible {
    opacity: 1;
    transform: translateY(0);
}

@media (max-width: 640px) {
    .video-controls {
        gap: 3px; /* tighter spacing */
        bottom: 6px;
        left: 6px;
        padding: 2px 4px;
    }

    .video-controls button {
        padding: 4px;       /* smaller touch size */
        font-size: 0.7rem;  /* smaller icon/text */
    }
}

.temple-bg {
    background-image: url('{{ url_for('static', filename='images/temple_bg.png') }}');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.2; /* matches your old opacity */
}

/* Mobile-specific tweak so image fits fully */
@media (max-width: 640px) {
    .temple-bg {
        background-size: contain; /* show full temple */
        background-position: top center; /* focus on temple top */
    }
}

</style>
{% endblock %}

