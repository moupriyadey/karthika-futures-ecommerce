{% extends '_base.html' %}

{% block title %}Karthika Futures - Your Gateway to Divine Art{% endblock %}

{% block content %}
{# Added pt-20 to push content down below the navbar #}
<main class="pt-20"> 
    <!-- Hero Section: Mahabharata Theme -->
    <section class="relative min-h-[100vh] sm:min-h-[90vh] flex items-center justify-center text-white overflow-hidden px-4">
        <video autoplay muted loop class="absolute inset-0 w-full h-full object-cover z-0">
            <!-- Replace with a suitable background video for divine/Mahabharata theme -->
            <!-- For now, using a placeholder video. You can find free stock videos or create your own. -->
            <source src="https://assets.mixkit.co/videos/preview/mixkit-sun-rays-in-the-forest-1296-large.mp4" type="video/mp4">
            Your browser does not support the video tag.
        </video>
        <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-black opacity-75 z-10"></div>
        <div class="relative z-20 text-center p-4 max-w-4xl mx-auto">
            <h1 class="text-3xl sm:text-5xl md:text-7xl font-extrabold mb-4 animate-fade-in-up leading-tight">
                MouRupa.com: Where Art Meets Divinity
            </h1>
            <p class="text-base sm:text-lg md:text-2xl mb-6 font-light animate-fade-in-up animation-delay-300">
                Embark on a spiritual journey through timeless artworks inspired by the Mahabharata and Hindu mythology.
            </p>
            <a href="/all-products" class="btn btn-primary text-base sm:text-xl px-6 sm:px-8 py-3 sm:py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 animate-fade-in-up animation-delay-600">
                Go
            </a>
        </div>
    </section>

    <!-- Dharma Prachar & Donation Section -->
    <section class="py-16 bg-gradient-to-br from-orange-50 to-yellow-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl font-extrabold mb-6 text-primary">Support Dharma Prachar</h2>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Every purchase from Karthika Futures contributes to the propagation of Dharma and ancient spiritual wisdom. Your support helps us spread the teachings of the Mahabharata and other sacred texts globally.
            </p>
            <a href="{{ url_for('contact') }}" class="btn btn-success text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                Learn More & Donate <i class="fas fa-heart ml-2"></i>
            </a>
        </div>
    </section>

    <!-- Featured Artworks Section (Horizontal Scroll) -->
    <section class="py-16 bg-white">
        <div class="container mx-auto">
            <h2 class="text-4xl font-extrabold text-center text-gray-800 mb-10">Featured Divine Masterpieces</h2>
            <div class="relative">
                <div id="featured-artworks-carousel" class="flex overflow-x-auto snap-x snap-mandatory pb-4 scrollbar-hide">
                    {% for artwork in featured_artworks %}
                    <div class="flex-shrink-0 w-80 snap-center mx-3 product-card bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-xl">
                        <a href="{{ url_for('product_detail', sku=artwork.sku) }}">
                            <div class="thumbnail-wrapper rounded-lg shadow-sm group">
  <img 
    src="{{ url_for('static', filename=artwork.get_images_list()[0] if artwork.get_images_list() else 'images/placeholder.png') }}"
    alt="{{ artwork.name }}"
    class="object-contain transition-transform duration-300 group-hover:scale-105 cursor-pointer"
    onclick="event.preventDefault(); openFullImage('{{ url_for('static', filename=artwork.get_images_list()[0] if artwork.get_images_list() else 'images/placeholder.png') }}');"
  >
</div>

                        </a>
                        <div class="p-4">
                            <h3 class="text-xl font-semibold text-gray-900 mb-2 truncate">{{ artwork.name }}</h3>
                            <p class="text-gray-600 text-sm mb-3">{{ artwork.description[:100] }}{% if artwork.description|length > 100 %}...{% endif %}</p>
                            <div class="flex items-baseline justify-between mb-4">
                                <span class="text-2xl font-bold text-primary final-price">{{ artwork.selling_price_incl_gst | currency }}</span>
                                {% if artwork.selling_price_incl_gst != artwork.original_price %}
                                    <span class="text-lg text-gray-500 line-through">{{ artwork.original_price | currency }}</span>
                                {% endif %}
                            </div>
                            <div class="flex items-center mb-3">
                                <!-- Placeholder for Ratings - Integrate actual rating system if available -->
                                <div class="text-yellow-500">
                                    <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                                </div>
                                <span class="text-sm text-gray-600 ml-2">(4.5/5)</span>
                            </div>
                            {% if artwork.shipping_charge is defined and artwork.shipping_charge == 0 %}
                            <p class="text-green-600 font-semibold text-sm mb-3"><i class="fas fa-truck mr-1"></i> Free Delivery</p>
                            {% else %}
                            <p class="text-gray-500 text-sm mb-3"><i class="fas fa-truck mr-1"></i> Shipping charges apply</p>
                            {% endif %}
                            <div class="flex justify-center">
                                <a href="{{ url_for('product_detail', sku=artwork.sku) }}" class="btn btn-primary px-6 py-2">View Details</a>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <p class="text-center text-gray-600 w-full">No featured artworks available at the moment.</p>
                    {% endfor %}
                </div>
                <button class="absolute left-0 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 z-30" id="scroll-left-featured">
                    <i class="fas fa-chevron-left text-gray-700"></i>
                </button>
                <button class="absolute right-0 top-1/2 -translate-y-1/2 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 z-30" id="scroll-right-featured">
                    <i class="fas fa-chevron-right text-gray-700"></i>
                </button>
            </div>
        </div>
    </section>

    <!-- QR Code Donation Section -->
    <section class="py-16 bg-gradient-to-br from-orange-50 to-yellow-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl font-extrabold mb-6 text-primary">Support Our Divine Mission</h2>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Your generous contributions help us propagate Dharma and preserve ancient spiritual wisdom through art. Every donation makes a difference.
            </p>
            <div class="inline-block p-4 bg-white rounded-xl shadow-2xl border-4 border-white transition-transform duration-300 hover:rotate-0">
                <img src="{{ url_for('static', filename='uploads/qr_code.png') }}" alt="Donation QR Code" 
                     class="w-48 h-48 object-contain rounded-lg border-8 border-gray-100 shadow-inner-lg embossed-qr-shadow">
            </div>
            <p class="text-2xl font-bold text-gray-800 mt-6 mb-4">Scan to Donate via UPI</p>
            <div class="flex justify-center space-x-6 mb-8">
                <img src="{{ url_for('static', filename='images/upi_logos/bhim.png') }}" alt="BHIM UPI" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/gpay.png') }}" alt="Google Pay" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/phonepe.png') }}" alt="PhonePe" class="h-10 w-auto">
                <img src="{{ url_for('static', filename='images/upi_logos/paytm.png') }}" alt="Paytm" class="h-10 w-auto">
            </div>
            <a href="{{ url_for('contact') }}" class="btn btn-primary text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                Contact for Other Donation Methods <i class="fas fa-hand-holding-heart ml-2"></i>
            </a>
        </div>
    </section>

    <!-- Testimonials Section -->
    <section class="py-16 bg-gradient-to-br from-yellow-50 to-orange-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="text-4xl font-extrabold mb-10 text-primary">Voices of Devotion</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for testimonial in testimonials %}
                <div class="bg-white p-6 rounded-lg shadow-lg flex flex-col items-center text-center">
                    <img src="{{ url_for('static', filename=testimonial.image) }}" alt="{{ testimonial.name }}" class="w-24 h-24 rounded-full object-cover mb-4 border-4 border-primary shadow-md">
                    <p class="text-lg font-medium mb-3">"{{ testimonial.feedback }}"</p>
                    <div class="text-yellow-500 mb-2">
                        {% for i in range(testimonial.rating) %}<i class="fas fa-star"></i>{% endfor %}
                        {% if testimonial.rating % 1 != 0 %}<i class="fas fa-star-half-alt"></i>{% endif %}
                    </div>
                    <p class="font-semibold text-gray-700">- {{ testimonial.name }}</p>
                    {% if testimonial.product_sku %}
                    <a href="{{ url_for('product_detail', sku=testimonial.product_sku) }}" class="text-sm text-blue-600 hover:underline mt-2">View Artwork</a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Call to Action / Explore More -->
    <section class="py-16 bg-primary text-white text-center">
        <div class="container mx-auto">
            <h2 class="text-4xl font-extrabold mb-6">Discover Your Spiritual Connection</h2>
            <p class="text-lg md:text-xl max-w-3xl mx-auto mb-8">
                Each artwork at Karthika Futures is a gateway to ancient wisdom and inner peace. Find the piece that resonates with your soul.
            </p>
            <a href="{{ url_for('all_products') }}" class="btn bg-white text-primary text-xl px-8 py-4 rounded-full shadow-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-300">
                Begin Your Journey <i class="fas fa-leaf ml-2"></i>
            </a>
        </div>
    </section>
</main>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Horizontal scroll for featured artworks
        const carousel = document.getElementById('featured-artworks-carousel');
        const scrollLeftBtn = document.getElementById('scroll-left-featured');
        const scrollRightBtn = document.getElementById('scroll-right-featured');

        if (carousel) {
            scrollLeftBtn.addEventListener('click', () => {
                carousel.scrollBy({
                    left: -carousel.offsetWidth / 2, // Scroll half the visible width
                    behavior: 'smooth'
                });
            });

            scrollRightBtn.addEventListener('click', () => {
                carousel.scrollBy({
                    left: carousel.offsetWidth / 2, // Scroll half the visible width
                    behavior: 'smooth'
                });
            });
        }
    });
</script>
{# This script block was outside extra_js, moved inside for proper structure #}
<script>
    if (!window.isUserLoggedIn) {
        localStorage.removeItem('cartCount');
        window.updateCartCountDisplay?.(); // If function exists, call it
    }
</script>

<style>
    /* Custom styles for animations */
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .animate-fade-in-up {
        animation: fadeInUp 1s ease-out forwards;
        opacity: 0; /* Hidden by default */
    }

    .animation-delay-300 { animation-delay: 0.3s; }
    .animation-delay-600 { animation-delay: 0.6s; }

    /* Hide scrollbar but allow scrolling */
    .scrollbar-hide {
        -ms-overflow-style: none;  /* IE and Edge */
        scrollbar-width: none;  /* Firefox */
    }
    .scrollbar-hide::-webkit-scrollbar {
        display: none; /* Chrome, Safari, Opera */
    }

    /* Custom styles for the embossed QR code */
    .embossed-qr-shadow {
        box-shadow: 
            inset 0 2px 4px rgba(0,0,0,0.06), /* Inner shadow for embossed effect */
            0 4px 8px rgba(0,0,0,0.1); /* Soft outer shadow */
    }

    @media (max-width: 375px) {
        h1 {
            font-size: 1.75rem !important;
            line-height: 2.2rem !important;
        }
        p {
            font-size: 1rem !important;
        }
    }

</style>
{% endblock %}
