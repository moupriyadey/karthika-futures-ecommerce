{% extends '_base.html' %}

{% block title %}Karthika Futures - Your Gateway to Divine Art{% endblock %}

{% block content %}
<main class="pt-20">

<!-- Explore Categories -->
<section class="py-6 bg-gradient-to-r from-purple-600 to-pink-500">
  <div class="container mx-auto px-4">
    <h2 class="text-2xl font-bold text-white mb-4">Explore Categories</h2>

    <div class="flex overflow-x-auto space-x-6 scrollbar-hide">
      {% for category in categories %}
      <a href="#{{ category.name|lower|replace(' ', '-') }}"
         class="flex-shrink-0 w-28 text-center group">
         
        <!-- Circle with the specific category image -->
        <div class="w-32 h-32 mx-auto rounded-full bg-white shadow-lg overflow-hidden 
                    transform transition duration-300 group-hover:scale-110 flex items-center justify-center">
          <img src="{{ url_for('static', filename=category.image) if category.image else url_for('static', filename='images/placeholder.png') }}"
    alt="{{ category.name }}"
    class="w-full h-full object-cover object-center">
        </div>

        <!-- Category name -->
        <p class="mt-2 text-white font-semibold">{{ category.name }}</p>
        <p class="text-xs text-gray-200">Divine collection</p>
      </a>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Optional: smooth scroll -->
<style>
  html {
    scroll-behavior: smooth;
  }
</style>

<!-- Category Sections -->
{% for category, products in categorized_artworks.items() %}
<section id="{{ category|lower|replace(' ', '-') }}" class="py-8 mb-8 bg-white rounded-lg shadow-md">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold text-gray-800 mb-6">{{ category|upper }}</h2>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
      {% for product in products %}

      <div class="product-card bg-white rounded-lg shadow-lg overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-xl flex flex-col">
        <a href="{{ url_for('product_detail', sku=product.sku) }}">
          <div class="h-48 bg-white flex items-center justify-center overflow-hidden rounded-lg shadow-sm hover:shadow-md transition duration-300 group pt-1 sm:pt-2 md:pt-3">
            <img src="{{ product.get_images_list()[0] if product.get_images_list() else url_for('static', filename='images/placeholder.png') }}"
                 alt="{{ product.name }}"
                 class="object-contain max-h-full max-w-full transition-transform duration-300 group-hover:scale-105 cursor-pointer"
                 title="Click to view larger"
                 onclick="event.preventDefault(); openFullImage('{{ product.get_images_list()[0] if product.get_images_list() else url_for('static', filename='images/placeholder.png') }}');">
          </div>
        </a>

        <div class="p-3 flex-1 flex flex-col justify-between">
          <div>
            <h3 class="text-xl font-semibold text-gray-900 mb-1 truncate">{{ product.name }}</h3>
            <p class="text-gray-600 text-sm mb-1">
              {{ product.description[:100] }}{% if product.description|length > 100 %}...{% endif %}
            </p>

            <div class="flex items-baseline justify-between mb-2">
              <span class="text-2xl font-bold text-primary final-price">
                {{ product.selling_price_incl_gst | currency }}
              </span>
            </div>

            <div class="flex items-center mb-1">
              <div class="text-yellow-500">
                <i class="fas fa-star"></i><i class="fas fa-star"></i>
                <i class="fas fa-star"></i><i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
              <span class="text-sm text-gray-600 ml-2">(4.5/5)</span>
            </div>

            {% if product.shipping_charge == 0 %}
              <p class="text-green-600 font-semibold text-sm mb-1">
                <i class="fas fa-truck mr-1"></i> Free Delivery
              </p>
            {% else %}
              <p class="text-gray-500 text-sm mb-1">
                <i class="fas fa-truck mr-1"></i> Shipping: {{ product.shipping_charge | currency }}
              </p>
            {% endif %}
          </div>

          <div class="flex justify-center mt-auto">
            {% if product.stock > 0 %}
              <a href="{{ url_for('product_detail', sku=product.sku) }}" class="btn btn-primary px-6 py-2 w-full text-center">
                View Details
              </a>
            {% else %}
              <button class="btn btn-secondary px-6 py-2 w-full opacity-60 cursor-not-allowed" disabled>
                Out of Stock
              </button>
            {% endif %}
          </div>
        </div>
      </div>

      {% endfor %}
    </div>
  </div>
</section>
{% endfor %}


   <section class="fade-section relative text-gray-900 text-center py-16"
         style="background: url('{{ url_for('static', filename='images/bg.jpg') }}') center/cover no-repeat;">
    
    <!-- Optional semi-transparent overlay for better text contrast -->
    <div class="absolute inset-0 bg-black opacity-25"></div>

    <div class="container mx-auto relative z-10">
        <h2 class="fade-item text-4xl sm:text-5xl font-extrabold text-gray-100 mb-12 drop-shadow-lg">
            Most Searched Items
        </h2>

        <div id="featuredArtworksBootstrapCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="3000">
            <div class="carousel-inner">
                {% for artwork in featured_artworks %}
                <div class="carousel-item {% if loop.first %}active{% endif %}">
                    <div class="flex justify-center">
                        <div class="fade-item product-card bg-white rounded-2xl shadow-xl overflow-hidden transform transition-transform duration-300 hover:scale-105 hover:shadow-2xl w-72 sm:w-80 mx-4 my-6">
                            <a href="{{ url_for('product_detail', sku=artwork.sku) }}">
                                <div class="thumbnail-wrapper p-4 bg-gray-50 rounded-t-2xl shadow-inner flex items-center justify-center group">
                                    <img src="{{ artwork.get_images_list()[0] if artwork.get_images_list() else url_for('static', filename='images/placeholder.png') }}"
                                         alt="{{ artwork.name }}"
                                         class="w-full h-64 object-contain transition-transform duration-300 group-hover:scale-105 cursor-pointer rounded-lg"
                                         title="Click to view larger"
                                         onclick="event.preventDefault(); openFullImage('{{ artwork.get_images_list()[0] if artwork.get_images_list() else url_for('static', filename='images/placeholder.png') }}'); event.stopPropagation();"
                                         loading="lazy">
                                </div>
                            </a>
                            <div class="p-5 flex flex-col justify-between">
                                <h3 class="text-xl sm:text-2xl font-semibold text-gray-900 mb-2 truncate">{{ artwork.name }}</h3>
                                <p class="text-gray-600 text-sm sm:text-base mb-3">{{ artwork.description[:120] }}{% if artwork.description|length > 120 %}...{% endif %}</p>
                                
                                <div class="flex items-baseline justify-between mb-2">
                                    <span class="text-2xl font-bold text-primary final-price">{{ artwork.selling_price_incl_gst | currency }}</span>
                                </div>

                                <div class="flex items-center mb-2">
                                    <div class="text-yellow-500">
                                        <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                                    </div>
                                    <span class="text-sm text-gray-600 ml-2">(4.5/5)</span>
                                </div>

                                {% if artwork.shipping_charge is defined and artwork.shipping_charge == 0 %}
                                <p class="text-green-600 font-semibold text-sm mb-3 text-left">
                                    <i class="fas fa-truck mr-1"></i> Free Delivery
                                </p>
                                {% else %}
                                <p class="text-gray-500 text-sm mb-3 text-left">
                                    <i class="fas fa-truck mr-1"></i> Shipping charges apply
                                </p>
                                {% endif %}

                                <div class="flex justify-center">
                                    <a href="{{ url_for('product_detail', sku=artwork.sku) }}" class="btn btn-primary px-6 py-2 sm:py-3 w-full hover:shadow-lg transition-shadow">
                                        View Details
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% else %}
                <div class="carousel-item active">
                    <p class="text-center text-gray-100 w-full py-10">No featured artworks available at the moment.</p>
                </div>
                {% endfor %}
            </div>

            <button class="carousel-control-prev" type="button" data-bs-target="#featuredArtworksBootstrapCarousel" data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#featuredArtworksBootstrapCarousel" data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
</section>


    <!-- YouTube Heading on white background -->
<div class="container my-4 text-center">
  <h2 class="section-title text-2xl font-extrabold underline decoration-blue-600 underline-offset-4">
    <a href="https://www.youtube.com/@KarthikaStories" target="_blank" class="text-blue-600 hover:no-underline">
      <i class="fab fa-youtube text-red-600 mr-2"></i>@karthikafutures
    </a>
  </h2>
</div>


    <div class="container my-4 text-center">
  <a href="https://www.youtube.com/@KarthikaStories" target="_blank" 
     class="text-lg sm:text-xl font-semibold text-blue-600 hover:underline">
    <i class="fab fa-youtube text-red-600 mr-2"></i>
    @karthikastories ‚Äî Watch sacred stories on our channel
  </a>
</div>


</section>



    
    <!-- Sacred Appeal Section -->
    
    <!-- End Sacred Appeal Section -->

    
    <section class="fade-section py-16 bg-primary text-white text-center">
        <div class="container mx-auto">
            <h2 class="fade-item text-4xl font-extrabold mb-6">Discover Your Spiritual Connection</h2>
            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8">
                Each artwork at Karthika Futures is a gateway to ancient wisdom and inner peace. Find the piece that resonates with your soul.
            </p>
            <a href="{{ url_for('all_products') }}" class="fade-item btn bg-white text-primary text-xl px-8 py-4 rounded-full shadow-lg hover:bg-gray-100 transform hover:scale-105 transition-all duration-300">
                Begin Your Journey <i class="fas fa-leaf ml-2"></i>
            </a>
        </div>
    </section>

    <section class="fade-section py-16 bg-gradient-to-br from-yellow-50 to-orange-50 text-gray-800">
    <div class="container mx-auto text-center">
        <h2 class="fade-item text-4xl font-extrabold mb-6 text-primary">Mission of Karthikafutures</h2>

            <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
                Every purchase from Karthika Futures contributes to the propagation of Dharma and ancient spiritual wisdom.
            </p>
            <a href="{{ url_for('about') }}" class="fade-item btn btn-success text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
    Read more about Dharma Prachar <i class="fas fa-heart ml-2"></i>
</a>
        </div>
    </section>

    <section class="fade-section py-16 bg-gradient-to-br from-orange-50 to-yellow-100 text-gray-800">
    <div class="container mx-auto text-center">
        <h2 class="fade-item text-4xl font-extrabold mb-6 text-primary">Dakshina to Acharya Guru</h2>
        
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
            With deep respect and gratitude, we invite you to support our revered Acharya Prabhu. For decades, he has dedicated his life to teaching the profound wisdom of the Ramayana, Mahabharata, and MahaBhagavata‚Äîour most sacred Puranas.
        </p>
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
            Your support, a humble Dakshina, is vital for his vision: establishing more centers to keep these ancient teachings alive for future generations.
        </p>
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
            Every purchase of our art and every donation you make is a meaningful contribution to this mission. You are not just buying a product; you are helping to preserve and propagate the timeless values of Dharma for all.
        </p>
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
          üå∏üåºüïâÔ∏èüåºüå∏  
        </p>
 
        <div class="my-8"></div>

        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
            ‡§∞‡§æ‡§Æ‡§æ‡§Ø‡§£, ‡§Æ‡§π‡§æ‡§≠‡§æ‡§∞‡§§ ‡§î‡§∞ ‡§Æ‡§π‡§æ‡§≠‡§æ‡§ó‡§µ‡§§ ‡§ú‡•à‡§∏‡•á ‡§Æ‡§π‡§æ‡§® ‡§ó‡•ç‡§∞‡§Ç‡§• ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§µ‡§ø‡§∞‡§æ‡§∏‡§§ ‡§ï‡•á ‡§∏‡•ç‡§§‡§Ç‡§≠ ‡§π‡•à‡§Ç. ‡§π‡§Æ‡§æ‡§∞‡•á ‡§™‡•ç‡§∞‡§ø‡§Ø ‡§Ü‡§ö‡§æ‡§∞‡•ç‡§Ø ‡§™‡•ç‡§∞‡§≠‡•Å ‡§®‡•á ‡§á‡§® ‡§ó‡•ç‡§∞‡§Ç‡§•‡•ã‡§Ç ‡§ï‡•á ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•ã ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ ‡§ú‡•Ä‡§µ‡§® ‡§∏‡§Æ‡§∞‡•ç‡§™‡§ø‡§§ ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à‡•§
        </p>
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
            ‡§π‡§Æ ‡§Ü‡§™‡§∏‡•á ‡§µ‡§ø‡§®‡§Æ‡•ç‡§∞‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§æ ‡§Ö‡§®‡•Å‡§∞‡•ã‡§ß ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç. ‡§Ü‡§™‡§ï‡•Ä ‡§è‡§ï ‡§∏‡§æ‡§ß‡§æ‡§∞‡§£ ‡§¶‡§ï‡•ç‡§∑‡§ø‡§£‡§æ ‡§â‡§®‡§ï‡•á ‡§Æ‡§ø‡§∂‡§® ‡§ï‡•ã ‡§î‡§∞ ‡§≠‡•Ä ‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞ ‡§¨‡§®‡§æ‡§®‡•á ‡§Æ‡•á‡§Ç ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à, ‡§ú‡§ø‡§∏‡§∏‡•á ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•Ä ‡§è‡§ï ‡§ê‡§∏‡•Ä ‡§µ‡§ø‡§∞‡§æ‡§∏‡§§ ‡§ï‡§æ ‡§®‡§ø‡§∞‡•ç‡§Æ‡§æ‡§£ ‡§π‡•ã‡§ó‡§æ ‡§ú‡•ã ‡§π‡§Æ‡•á‡§∂‡§æ ‡§¨‡§®‡•Ä ‡§∞‡§π‡•á‡§ó‡•Ä‡•§
        </p>
        <p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-8 leading-relaxed">
            ‡§Ü‡§™‡§ï‡•á ‡§â‡§¶‡§æ‡§∞ ‡§Ø‡•ã‡§ó‡§¶‡§æ‡§® ‡§∏‡•á ‡§π‡§Æ ‡§ï‡§≤‡§æ ‡§ï‡•á ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ ‡§∏‡•á ‡§á‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§ï‡•ã ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç. ‡§π‡§∞ ‡§¶‡§æ‡§® ‡§Ø‡§æ ‡§ñ‡§∞‡•Ä‡§¶ ‡§ï‡•á ‡§∏‡§æ‡§•, ‡§Ü‡§™ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§∏‡§Ç‡§∏‡•ç‡§ï‡•É‡§§‡§ø ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§æ‡§ö‡•Ä‡§® ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§™‡§∞‡§Ç‡§™‡§∞‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§ï‡§∞‡§®‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§≠‡§æ‡§ó‡•Ä‡§¶‡§æ‡§∞ ‡§¨‡§® ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§
        </p>
<p class="fade-item text-lg md:text-xl max-w-3xl mx-auto mb-4 leading-relaxed">
          ü™∑üåºüôèüèºüåºü™∑  
        </p>
        <div class="fade-item inline-block p-4 bg-white rounded-xl shadow-2xl border-4 border-white transition-transform duration-300 hover:rotate-0">
            <img src="{{ url_for('static', filename='uploads/qr_code.png') }}" alt="Donation QR Code"
                 class="w-48 h-48 object-contain rounded-lg border-8 border-gray-100 shadow-inner-lg embossed-qr-shadow">
        </div>
        <p class="fade-item text-2xl font-bold text-gray-800 mt-6 mb-4">Scan to Donate via UPI</p>
        <div class="fade-item flex justify-center space-x-6 mb-8">
            <img src="{{ url_for('static', filename='images/upi_logos/bhim.png') }}" alt="BHIM UPI" class="h-10 w-auto">
            <img src="{{ url_for('static', filename='images/upi_logos/gpay.png') }}" alt="Google Pay" class="h-10 w-auto">
            <img src="{{ url_for('static', filename='images/upi_logos/phonepe.png') }}" alt="PhonePe" class="h-10 w-auto">
            <img src="{{ url_for('static', filename='images/upi_logos/paytm.png') }}" alt="Paytm" class="h-10 w-auto">
        </div>
        <a href="{{ url_for('contact') }}" class="fade-item btn btn-primary text-xl px-8 py-4 rounded-full shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
            Contact for Other Donation Methods <i class="fas fa-hand-holding-heart ml-2"></i>
        </a>
    </div>
</section>
    <section class="fade-section py-16 bg-gradient-to-br from-yellow-50 to-orange-100 text-gray-800">
        <div class="container mx-auto text-center">
            <h2 class="fade-item text-4xl font-extrabold mb-10 text-primary">Voices of Devotion</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                {% for testimonial in testimonials %}
                <div class="fade-item bg-white p-6 rounded-lg shadow-lg flex flex-col items-center text-center transform transition-transform duration-300 hover:scale-[1.02] hover:shadow-xl">
                    <img src="{{ url_for('static', filename=testimonial.image) }}" alt="{{ testimonial.name }}" class="w-24 h-24 rounded-full object-cover mb-4 border-4 border-primary shadow-md">
                    <p class="text-lg font-medium mb-3">"{{ testimonial.feedback }}"</p>
                    <div class="text-yellow-500 mb-2">
                        {% for i in range(testimonial.rating) %}<i class="fas fa-star"></i>{% endfor %}
                        {% if testimonial.rating % 1 != 0 %}<i class="fas fa-star-half-alt"></i>{% endif %}
                    </div>
                    <p class="font-semibold text-gray-700">- {{ testimonial.name }}</p>
                    {% if testimonial.product_sku %}
                    <a href="{{ url_for('product_detail', sku=testimonial.product_sku) }}" class="text-sm text-blue-600 hover:underline mt-2">View Artwork</a>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    <div id="fullImageView" class="fixed inset-0 bg-black bg-opacity-80 hidden z-50 flex items-center justify-center">
    <div class="relative max-w-3xl w-full" onclick="closeFullImage(event)">
        <img id="fullImage" class="w-full max-h-screen object-contain relative">
        <div class="absolute inset-0 pointer-events-none z-20 flex flex-wrap justify-center items-center text-white text-lg font-bold opacity-40">
            {% for i in range(12) %}<div class="m-4 -rotate-45">Karthikafutures</div>{% endfor %}
        </div>
        <button onclick="closeFullImage(event)" class="absolute top-4 right-4 text-white text-2xl">&times;</button>
    </div>
</div>

</main>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    const fadeSections = document.querySelectorAll(".fade-section");

    const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
            if (entry.isIntersecting) {
                const fadeItems = entry.target.querySelectorAll(".fade-item");
                fadeItems.forEach((item, index) => {
                    setTimeout(() => {
                        item.classList.add("fade-visible");
                    }, index * 150); // stagger delay
                });
                // observer.unobserve(entry.target); // keep commented for repeats
            } else {
                // Reset when out of view
                const fadeItems = entry.target.querySelectorAll(".fade-item");
                fadeItems.forEach((item) => {
                    item.classList.remove("fade-visible");
                });
            }
        });
    }, { threshold: 0.15 });

    fadeSections.forEach((section) => {
        observer.observe(section);
    });
});


document.addEventListener("DOMContentLoaded", function () {
    const video = document.getElementById("heroVideo");
    const controls = document.getElementById("videoControls");

    const playBtn = document.getElementById("playBtn");
    const pauseBtn = document.getElementById("pauseBtn");
    const muteBtn = document.getElementById("muteBtn");
    const unmuteBtn = document.getElementById("unmuteBtn");
    const fullscreenBtn = document.getElementById("fullscreenBtn");
    const forwardBtn = document.getElementById("forwardBtn");
    const backBtn = document.getElementById("backBtn");

    let controlsTimeout;

    function showControls() {
        controls.classList.add("opacity-100");
        controls.classList.remove("opacity-0");
        clearTimeout(controlsTimeout);
        controlsTimeout = setTimeout(() => {
            controls.classList.add("opacity-0");
            controls.classList.remove("opacity-100");
        }, 3000);
    }

    document.addEventListener("mousemove", showControls);
    document.addEventListener("touchstart", showControls);

    // Play / Pause
    pauseBtn.addEventListener("click", () => {
        video.pause();
        pauseBtn.classList.add("hidden");
        playBtn.classList.remove("hidden");
    });
    playBtn.addEventListener("click", () => {
        video.play();
        playBtn.classList.add("hidden");
        pauseBtn.classList.remove("hidden");
    });

    // Mute / Unmute
    muteBtn.addEventListener("click", () => {
        video.muted = true;
        muteBtn.classList.add("hidden");
        unmuteBtn.classList.remove("hidden");
    });
    unmuteBtn.addEventListener("click", () => {
        video.muted = false;
        unmuteBtn.classList.add("hidden");
        muteBtn.classList.remove("hidden");
    });

    // Fullscreen
    fullscreenBtn.addEventListener("click", () => {
        if (video.requestFullscreen) {
            video.requestFullscreen();
        } else if (video.webkitRequestFullscreen) {
            video.webkitRequestFullscreen();
        } else if (video.msRequestFullscreen) {
            video.msRequestFullscreen();
        }
    });

    // Forward / Backward
    forwardBtn.addEventListener("click", () => {
        video.currentTime += 10;
    });
    backBtn.addEventListener("click", () => {
        video.currentTime -= 10;
    });

    // Initially show controls
    showControls();
});

function openFullImage(imageUrl) {
    const popup = document.getElementById("fullImageView");
    const popupImage = document.getElementById("fullImage");
    popupImage.src = imageUrl;
    popup.classList.remove("hidden");
    document.body.style.overflow = 'hidden'; // Prevents scrolling behind popup
}

function closeFullImage(event) {
    if (event) {
        event.stopPropagation();
    }
    document.getElementById("fullImageView").classList.add("hidden");
    document.body.style.overflow = 'auto'; // Re-enables scrolling
}
</script>


<style>
.watermark-overlay {
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="100"><text x="100" y="50" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="rgba(0, 0, 0, 0.1)" text-anchor="middle" transform="rotate(-45 100 50)">karthikafutures</text></svg>');
    background-repeat: repeat;
    background-size: 200px 100px;
    z-index: 10;
}

.video-controls {
    position: absolute;
    bottom: 10px;
    left: 10px;
    display: flex;
    gap: 6px;
    z-index: 40;
}

.video-controls button {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: none;
    padding: 6px; /* smaller than 10px */
    font-size: 0.9rem;
    border-radius: 50%;
    transition: background 0.3s ease, transform 0.2s ease;
    cursor: pointer;
}

.video-controls button:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: scale(1.1);
}

.video-controls button:focus {
    outline: none;
}


 /* Make sure the container clips its background */
.bg-within {
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border-radius: 1rem; /* match your rounded-xl */
    overflow: hidden; /* ensures no overflow outside the rounded corners */
}


.fade-section {
    opacity: 1; /* Keep section visible for layout */
}

.fade-item {
    opacity: 0;
    transform: translateY(25px);
    transition: opacity 0.9s ease, transform 0.9s ease;
}

.fade-item.fade-visible {
    opacity: 1;
    transform: translateY(0);
}

@media (max-width: 640px) {
    .video-controls {
        gap: 3px; /* tighter spacing */
        bottom: 6px;
        left: 6px;
        padding: 2px 4px;
    }

    .video-controls button {
        padding: 4px;       /* smaller touch size */
        font-size: 0.7rem;  /* smaller icon/text */
    }
}

.temple-bg {
    background-image: url('{{ url_for('static', filename='images/temple_bg.png') }}');
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    opacity: 0.2; /* matches your old opacity */
}

/* Mobile-specific tweak so image fits fully */
@media (max-width: 640px) {
    .temple-bg {
        background-size: contain; /* show full temple */
        background-position: top center; /* focus on temple top */
    }
}

</style>
{% endblock %}

