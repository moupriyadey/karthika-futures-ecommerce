{% extends '_base.html' %}

{% block title %}Admin Dashboard - Karthika Futures{% endblock %}

{% block content %}
<div class="container main-content-area position-relative">
    <h2 class="text-center mb-4">Admin Panel</h2>

    <div class="d-flex border-bottom mb-4">
        <a href="{{ url_for('admin_panel') }}" class="nav-link px-3 py-2 active border-bottom border-primary border-2">Dashboard</a>
        <a href="{{ url_for('admin_artworks_view') }}" class="nav-link px-3 py-2">Artworks</a>
        <a href="{{ url_for('admin_orders_view') }}" class="nav-link px-3 py-2">Orders</a>
        <a href="{{ url_for('admin_categories_view') }}" class="nav-link px-3 py-2">Categories</a>
    </div>

    <div class="space-y-4">
        <h3 class="h4 mb-3">Quick Overview</h3>

        <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 mb-4">
            <!-- Total Artworks Card -->
            <div class="col">
                <div class="card text-white bg-info mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">{{ artworks | length }}</h5>
                            <i class="fas fa-palette fa-2x"></i>
                        </div>
                        <p class="card-text">Total Artworks</p>
                    </div>
                </div>
            </div>

            <!-- Total Orders Card -->
            <div class="col">
                <div class="card text-white bg-success mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">{{ orders | length }}</h5>
                            <i class="fas fa-shopping-bag fa-2x"></i>
                        </div>
                        <p class="card-text">Total Orders</p>
                    </div>
                </div>
            </div>

            <!-- Pending Orders Card -->
            <div class="col">
                <div class="card text-white bg-warning mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">
                                {{ orders | selectattr('status', 'equalto', 'Pending Payment') | list | length }}
                            </h5>
                            <i class="fas fa-hourglass-half fa-2x"></i>
                        </div>
                        <p class="card-text">Pending Payments</p>
                    </div>
                </div>
            </div>

            <!-- Shipped Orders Card -->
            <div class="col">
                <div class="card text-white bg-primary mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">
                                {{ orders | selectattr('status', 'equalto', 'Shipped') | list | length }}
                            </h5>
                            <i class="fas fa-truck fa-2x"></i>
                        </div>
                        <p class="card-text">Shipped Orders</p>
                    </div>
                </div>
            </div>

            <!-- Delivered Orders Card -->
            <div class="col">
                <div class="card text-white bg-secondary mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">
                                {{ orders | selectattr('status', 'equalto', 'Delivered') | list | length }}
                            </h5>
                            <i class="fas fa-check-circle fa-2x"></i>
                        </div>
                        <p class="card-text">Delivered Orders</p>
                    </div>
                </div>
            </div>

            <!-- Invoices to Send (Prepared) -->
            <div class="col">
                <div class="card text-white bg-dark mb-3 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="card-title">
                                {{ orders | selectattr('invoice_details.invoice_status', 'equalto', 'Prepared') | list | length }}
                            </h5>
                            <i class="fas fa-file-invoice-dollar fa-2x"></i>
                        </div>
                        <p class="card-text">Invoices to Send</p>
                    </div>
                </div>
            </div>
        </div>

        <h3 class="h4 mb-3 mt-4">Quick Actions</h3>
        <div class="row row-cols-1 row-cols-md-2 g-3">
            <div class="col">
                <a href="{{ url_for('add_artwork') }}" class="btn btn-primary d-block py-3">
                    <i class="fas fa-plus-circle me-2"></i> Add New Artwork
                </a>
            </div>
            <div class="col">
                <a href="{{ url_for('admin_artworks_view') }}" class="btn btn-secondary d-block py-3">
                    <i class="fas fa-images me-2"></i> Manage Artworks
                </a>
            </div>
            <div class="col">
                <a href="{{ url_for('admin_orders_view') }}" class="btn btn-info d-block py-3">
                    <i class="fas fa-truck-loading me-2"></i> Manage Orders
                </a>
            </div>
            <div class="col">
                <a href="{{ url_for('admin_categories_view') }}" class="btn btn-success d-block py-3">
                    <i class="fas fa-tags me-2"></i> Manage Categories
                </a>
            </div>
            <div class="col">
                <a href="{{ url_for('export_orders_csv') }}" class="btn btn-dark d-block py-3">
                    <i class="fas fa-file-excel me-2"></i> Export Orders CSV
                </a>
            </div>
            <div class="col">
                <a href="{{ url_for('export_artworks_csv') }}" class="btn btn-dark d-block py-3">
                    <i class="fas fa-file-image me-2"></i> Export Artworks CSV
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
