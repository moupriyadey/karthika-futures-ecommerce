{% extends '_base.html' %}

{% block title %}Add New Artwork - Karthika Futures{% endblock %}

{% block content %}
<div class="container main-content-area position-relative">
    <h2 class="text-center mb-4">Add New Artwork</h2>
    
    <form action="{{ url_for('add_artwork') }}" method="POST" enctype="multipart/form-data" class="p-4 border rounded shadow-sm bg-light">
        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <label for="name" class="form-label">Artwork Name</label>
                <input type="text" class="form-control" id="name" name="name" value="{{ request.form.name if request.form.name else '' }}" required>
            </div>
            <div class="col-md-6">
                <label for="sku" class="form-label">SKU (Unique Identifier)</label>
                <input type="text" class="form-control" id="sku" name="sku" value="{{ request.form.sku if request.form.sku else '' }}" required>
            </div>
        </div>

        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <label for="category" class="form-label">Category</label>
                <select class="form-select" id="category" name="category" required>
                    <option value="">Select a Category</option>
                    {% for cat in categories %}
                    <option value="{{ cat.name }}" {% if request.form.category == cat.name %}selected{% endif %}>{{ cat.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-6">
                <label for="original_price" class="form-label">Original Price (₹)</label>
                <input type="number" class="form-control" id="original_price" name="original_price" step="0.01" min="0" value="{{ request.form.original_price if request.form.original_price else '' }}" required>
            </div>
        </div>
        
        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <label for="stock" class="form-label">Stock Quantity</label>
                <input type="number" class="form-control" id="stock" name="stock" min="0" value="{{ request.form.stock if request.form.stock else '' }}" required>
            </div>
            <div class="col-md-6">
                <label for="gst_percentage" class="form-label">GST Percentage (%)</label>
                <input type="number" class="form-control" id="gst_percentage" name="gst_percentage" step="0.01" min="0" max="100" value="{{ request.form.gst_percentage if request.form.gst_percentage else default_gst_percentage }}" required>
            </div>
        </div>

        <div class="mb-4">
            <label for="description" class="form-label">Description</label>
            <textarea class="form-control" id="description" name="description" rows="4">{{ request.form.description if request.form.description else '' }}</textarea>
        </div>

        <div class="mb-4">
            <label for="images" class="form-label">Artwork Images (Max 16MB per file)</label>
            <input type="file" class="form-control" id="images" name="images" accept="image/*" multiple required>
            <div class="form-text">Select one or more image files.</div>
        </div>

        <h4 class="mb-3 mt-5">Pricing for Options</h4>
        <p class="text-muted mb-4">Enter additional prices for different sizes, frames, and glass. Enter 0 if not applicable.</p>

        <div class="row g-3 mb-4">
            <div class="col-md-4">
                <label for="frame_wooden" class="form-label">Frame: Wooden Price (₹)</label>
                <input type="number" class="form-control" id="frame_wooden" name="frame_wooden" step="0.01" min="0" value="{{ request.form.frame_wooden if request.form.frame_wooden else '0.00' }}">
            </div>
            <div class="col-md-4">
                <label for="frame_metal" class="form-label">Frame: Metal Price (₹)</label>
                <input type="number" class="form-control" id="frame_metal" name="frame_metal" step="0.01" min="0" value="{{ request.form.frame_metal if request.form.frame_metal else '0.00' }}">
            </div>
            <div class="col-md-4">
                <label for="frame_pvc" class="form-label">Frame: PVC Price (₹)</label>
                <input type="number" class="form-control" id="frame_pvc" name="frame_pvc" step="0.01" min="0" value="{{ request.form.frame_pvc if request.form.frame_pvc else '0.00' }}">
            </div>
        </div>

        <div class="row g-3 mb-4">
            <div class="col-md-6">
                <label for="glass_price" class="form-label">Glass Price (₹)</label>
                <input type="number" class="form-control" id="glass_price" name="glass_price" step="0.01" min="0" value="{{ request.form.glass_price if request.form.glass_price else '0.00' }}">
            </div>
        </div>

        <div class="row g-3 mb-4">
            <div class="col-md-3">
                <label for="size_a4" class="form-label">Size: A4 Price (₹)</label>
                <input type="number" class="form-control" id="size_a4" name="size_a4" step="0.01" min="0" value="{{ request.form.size_a4 if request.form.size_a4 else '0.00' }}">
            </div>
            <div class="col-md-3">
                <label for="size_a5" class="form-label">Size: A5 Price (₹)</label>
                <input type="number" class="form-control" id="size_a5" name="size_a5" step="0.01" min="0" value="{{ request.form.size_a5 if request.form.size_a5 else '0.00' }}">
            </div>
            <div class="col-md-3">
                <label for="size_letter" class="form-label">Size: Letter Price (₹)</label>
                <input type="number" class="form-control" id="size_letter" name="size_letter" step="0.01" min="0" value="{{ request.form.size_letter if request.form.size_letter else '0.00' }}">
            </div>
            <div class="col-md-3">
                <label for="size_legal" class="form-label">Size: Legal Price (₹)</label>
                <input type="number" class="form-control" id="size_legal" name="size_legal" step="0.01" min="0" value="{{ request.form.size_legal if request.form.size_legal else '0.00' }}">
            </div>
        </div>
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-end mt-4">
            <button type="submit" class="btn btn-primary btn-lg">Add Artwork</button>
            <a href="{{ url_for('admin_artworks_view') }}" class="btn btn-secondary btn-lg">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
