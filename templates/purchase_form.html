{% extends 'base.html' %}
{% block content %}
<div class="container py-4">
    <div class="row">
        <!-- Delivery Form -->
        <div class="col-md-6">
            <h4 class="mb-4">Delivery Details</h4>
            <form method="POST">
                <div class="mb-3">
                    <label for="name" class="form-label">Full Name</label>
                    <input type="text" name="name" class="form-control" value="{{ prefill_name }}" required>
                </div>
                <div class="mb-3">
                    <label for="email" class="form-label">Email</label>
                    <input type="email" name="email" class="form-control" value="{{ prefill_email }}" required>
                </div>
                <div class="mb-3">
                    <label for="phone" class="form-label">Phone</label>
                    <input type="text" name="phone" class="form-control" value="{{ prefill_phone }}" required>
                </div>
                <div class="mb-3">
                    <label for="address" class="form-label">Address</label>
                    <textarea name="address" class="form-control" required>{{ prefill_address }}</textarea>
                </div>
                <div class="mb-3">
                    <label for="pincode" class="form-label">Pincode</label>
                    <input type="text" name="pincode" class="form-control" value="{{ prefill_pincode }}" required>
                </div>
                <button type="submit" class="btn btn-primary">Place Order</button>
            </form>
        </div>

        <!-- Order Summary -->
        <div class="col-md-6">
            <h4 class="mb-4">Order Summary</h4>
            {% for item in cart_summary.cart_items %}
            <div class="border p-3 mb-3 rounded">
                <strong>{{ item.name }} (x{{ item.quantity }})</strong><br>
                Size: {{ item.options.size }} | Frame: {{ item.options.frame }} | Glass: {{ item.options.glass }}<br>
                Price: ₹{{ item.unit_price_before_gst }} | GST: {{ item.gst_percentage }}%
                <div class="text-end fw-bold mt-2">₹{{ item.total_price }}</div>
            </div>
            {% endfor %}

            <ul class="list-group">
                <li class="list-group-item d-flex justify-content-between">
                    <span>Subtotal (Pre-GST):</span>
                    <strong>₹{{ cart_summary.subtotal_before_gst }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>GST:</span>
                    <strong>₹{{ cart_summary.total_gst_amount }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Shipping:</span>
                    <strong>₹{{ cart_summary.shipping_charge }}</strong>
                </li>
                <li class="list-group-item d-flex justify-content-between">
                    <span>Total:</span>
                    <strong>₹{{ cart_summary.grand_total }}</strong>
                </li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
